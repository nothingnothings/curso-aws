












--> OK...




PODEMOS CRIAR LOAD BALANCERS 

DIRETAMENTE 



DO WIZARD DE AUTOSCALING,


NO SERVICE DE AUTOSCALING,





SE VC 




NAO TIVER 

CRIADO 1 ANTERIORMENTE...












--> MAS SE VC TIVER CRIADO 1 LOAD BALANCER ANTERIORMENTE,

VC PODE 


ESCOLHE-LO NESTE MOMENTO,

NO AUTOSCALING WIZARD...












--> LOAD BALANCERS PODEM SER CRIADOS TAMBÉM DENTRO DO EC2 DASHBOARD,


NA OPÇÃO LOAD BALANCER...













--> MAS VC TAMBÉM PODE ADICIONAR 1 LOAD BALANCER,

E AÍ 
ESCOLHER 

SE 

É UM 


APPLICATION (HTTP, HTTPS) OU NETWORK (TCP, UDP, TLS) LOAD BALANCER...












TIPICAMENTE, PARA WEB SERVERS,

VC 

ESCOLHE 

APPLICATION LOAD BALANCER...






VC ESCOLHE O NOME 

DESSE 

LOAD BALANCER,


E AÍ ESCOLHE SE É INTERNAL OU INTERNET-FACING...











-> SE RODAMOS 1 WEB SERVER,

ESCOLHEMOS INTERNET-FACING --> PQ ESSE LOAD BALANCER DEVE 

SER 

CAPAZ 

DE HANDLAR INCOMING HTTP REQUESTS E OS FORWARDAR A NOSSAS INSTANCES...














-> TAMBÉM TEMOS QUE ESCOLHER  __ O VPC 

E 

AS SUBNETS --> E É CLARO QUE ESSES DEVEM 

SER 


OS MESMOS 

 




DO ""AUTOSCALING GROUP""


QUE VC CRIA,



PQ VC QUER 

GARANTIR QUE 


SEU LOAD BALANCER 


SEJA 
CAPAZ  



DE FORWARDAR REQUESTS A INSTANCES 

QUE 

ESTÃO 

RODANDO 


NESSAS SUBNETS 


DENTRO DO VPC 

QUE 

ESCOLHEMOS PARA O 

AUTOSCALING GROUP...










--> CERTO... AÍ TAMBÉM TEMOS QUE 



SETTAR A REGRA ""PARA QUE TIPO DE REQUESTS VC VAI QUERER 

FAZER LISTEN TO, COM ESSE LOAD BALANCER""...










--> POR EXEMPLO,

AQUI O PROFESSOR ESTÁ FAZENDO LISTEN TO A NETWORK REQUESTS...













-> ISSO FEITO, O PROFESSOR PODE CRIAR 1 NOVO TARGET GROUP... -->  TARGET 

GROUPS SÃO 



BASICAMENTE OS GRUPOS DE INSTANCES QUE SERÃO USADOS 

PARA FORWARDAR OS REQUESTS (que vao ter requests distribuídos sobre si)...










--> E SE 1 LOAD BALANCER ESTÁ CONECTADO A 1 AUTOSCALING GROUP,

COMO AQUI,


ELE __ VAI 


AUTOMATICAMENTE 



ADICIONAR TODAS AS INSTANCES QUE SÃO/SERÃO CRIADAS 


POR AQUELE 


AUTOSCALING GROUP 




___ ÀQUELE TARGET GROUP QUE ESTAMOS CRIANDO AQUI...
















--> VC TAMBÉM PODERIA CRIAR AS INSTANCES MANUALMENTE,




E ENTÃO ASSIGNÁ-LAS COMO 


TARGET GROUP --> AÍ O LOAD BALANCER COMEÇARIA 


A FORWARDAR 


INCOMING REQUESTS 

 A ESSE TARGET GROUP, PARA NÓS...












--> MAS SE VC CRIAR ESSES 2 SERVICES EM CONJUNTO (

    AUTOSCALE SERVICE  ___ E __ _LOAD BALANCER
),



o load balancer 
JÁ VAI 


AUTOMATICAMENTE 

ADICIONAR EC2 INSTANCES LAUNCHED PELO 



AUTOSCALING SERVICE 

ÀQUELE 
TARGET GROUP...











-> DEPOIS DISSO,

TEMOS ALGUMAS OUTRAS SETTINGS,

COMO 


__HEALTH CHECKS___ -->  BASICAMENTE DEFINEM COMO O AWS 

DETERMINA 




SE 1 


INSTANCE QUE FOI 



LAUNCHED PELO AUTOSCALING SERVICE/COBERTA PELO LOAD BALANCING 

É 

'"HEALTHY"" OU NÃO --> OU SEJA,



DETERMINAR SE 
É CAPAZ 

DE 

RECEBER REQUESTS,

OU SE DEVE SER REPLACED... --> PQ CRASHED INSTANCES 


PRECISAM SER REPLACED -> E VC NAO QUER FORWARDAR REQUESTS,


COM O LOAD BALANCER,


A 
INSTANCES QUE CRASHARAM....












-> E, COM O HEALTH CHECK,


O AWS REALMENTE CHECA SE ESSAS INSTANCES ESTÃO UP AND RUNNING...
















--> DEPOIS DISSO,

PRECISAMOS ESCOLHER ALGUMAS AUTOSCALING CONDITIONS/RULES...














--> OU SEJA, 



DEVEMOS DEFINIR O ""GROUP SIZE"" DO AUTOSCALING...






--> DEFINIMOS A CAPACIDADE QUE NOSSAS INSTANCES DEVEM POSSUIR..





--> TUDO ISSO POSSUI RELAÇAO COM O SERVICE DE AUTOSCALING,


E NAO 

O SERVICE 

DE 

LOAD BALANCING...
















--> A ""DESIRED CAPACITY"" --> É BASICAMENTE O DEFAULT QUE VC GOSTARÁ DE TER...







MINIMUM CAPACITY --> COM ISSO, SUA QUANTIDADE DE INSTANCES NUNCA DEVERÁ SER MENOR 

DO QUE ESSE VALOR...









MAXIMUM CAPACITY --> O MAIOR NÚMERO DE INSTANCES QUE VC GOSTARÁ 
DE TER UP AND RUNNING,





DEPENDENDO DE 



INCREASING TRAFFIC...













-----> TEMOS SCALING POLICIES -> AQUI DEFINIMOS, A PARTIR DE QUAL METRIC,



QUEREMOS SCALE-UP NOSSAS INSTANCES...












--> AQUI, VC PODE PEDIR AO AWS QUE 


ELE DEVE __ MONITORAR O AVERAGE CPU UTILIZATION 




DAS __ EC2 INSTANCES QUE 

SÃO PARTE DAQUELE AUTOSCALING GROUP....  (ou outras metrics)..









--> VC PODE DIZER ALGO COMO ""SE 50% DE CPU UTILIZATION FOR EXCEDIDA,

QUEREMOS COMEÇAR A ADICIONAR MAIS INSTANCES"" --> FAZEMOS SCALEUP...












--> E SE VAMOS PARA BAIXO DAQUELA UTILIZAÇAO 

DE 50%,



PARA AQUELAS INSTANCES QUE FAZEM PARTE 

DO SCALING GROUP,




GOSTARÍAMOS DE SCALE DOWN,


E AÍ 
COMEÇAR A REMOVER INSTANCES...










NA PRÓXIMA ETAPA,



VC 

PODE 

ADICIONAR NOTIFICATIONS,




TALVEZ 
NOTIFICATIONS SEMPRE QUE 

INSTANCES ADICIONAIS FOREM 


COLOCADAS NAS SUAS SUBNETS...










--> VC SEMPRE PODE ADICIONAR TAGS,

PARA IDENTIFICAR RESOURCES...









--> REVIEW ALL SETTINGS,
E AÍ 
CREATE 



AQUELE 



AUTOSCALING GROUP...












--> OK... AGORA SABEMOS QUAL É A CORE IDEA POR TRÁS DO AUTOSCALING...