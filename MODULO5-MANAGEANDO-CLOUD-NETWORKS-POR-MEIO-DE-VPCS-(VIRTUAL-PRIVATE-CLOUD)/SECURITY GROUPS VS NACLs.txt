












--> OK.... E SECURITY GROUPS SÃO,

COMO MENCIONADO,




SIMPLESMENTE FIREWALLS PARA _ EC2 INSTANCES INDIVIDUAIS...















--> SECURITY GROUPS --> CHECAM OUTGOING E INGOING REQUESTS,


E AÍ 


BLOQUEAM OU OS PERMITEM....












--> UMA COISA IMPORTANTE SOBRE SECURITY GROUPS É QUE 


ELES ___ SÃO ___sTATEFUL____ --------> ISSO QUER DIZER QUE 




__ SE VC __ TIVER 1 REQUEST QUE FOI ""ALLOWED"",

A RESPONSE PARA AQUELE 


REQUEST TAMBÉM TERÁ SIDO PERMITIDA (


    ISSO SIGNIFICA QUE VC NÃO PRECISA DE REGRAS 
    EXTRAS PARA RESPONSES...
)











-----> ISSO É MAIS AVANÇADO,


MAS É ALGO QUE VC DEVE SABER:



""""SECURITY GROUPS SÃO STATEFUL""""




(STATEFUL: RESPONSES SÃO SEMPRE ALLOWED, se o REQUEST PASSOU SEM SER BLOQUEADO.)
















--> É CLARO QUE PODEMOS OU:




1) USAR DIFERENTES SECURITY GROUPS PARA MÚLTIPLAS INSTANCES


2) USAR 1 MESMO SECURITY GROUP PARA MÚLTIPLAS INSTANCES...













--> POR OUTRO LADO, NETWORK ACCESS CONTROL LISTS:



1) CONTROLAM O ACESSO A SUBNETS INTEIRAS, E NÃO A INSTANCES INDIVIDUAIS...





2) PORTANTO, COM SECURITY GROUPS VC TEM 1 MAIOR FINE-GRAIN CONTROL....






3) ELES TAMBÉM CHECAM OUTGOING/INCOMING REQUESTS E 

AÍ OS BLOQUEIAM CONDICIONALMENTE...





4) UMA DIFERENÇA EM RELAÇAO A SECURITY GROUPS É QUE 


ELES SÃO ___sTATELESS___...







--> POR SEREM STATELESS,


VC TEM QUE SETTAR DIFERENTES RULES PARA 


REQUESTS E RESPONSES (


    só pq 1 REQUEST FOI PERMITIDO,
    ISSO NÃO SIGNIFICA QUE 

    A RESPONSE 
    VAI CONSEGUIR SAIR DE SUA INSTANCE... vc também precisa 
    definir 

    a outbound rule para essa response aí, também...

)








5) OUTRO DETALHE,

1 MESMO NACL PODE SER ASSOCIADO A MÚLTIPLAS SUBNETS,

MAS 




6) 1 DADO SUBNET SÓ PODE TER 1 NACL ASSOCIADO A SI...

















POR FIM, HOJE TIPICAMENTE SECURITY GROUPS SÃO PREFERIDOS 

E RECOMENDADOS PELO AWS,
 



 POR ISSO DEVEMOS OS UTILIZAR EM VEZ DE NACLs....

















POR FIM, TAMBÉM TEMOS SUBNETS,

E A DIFERENÇA ENTRE PRIVATE E PUBLIC SUBNETS...








1) QUANDO O ASSUNTO É PRIVATE E PUBLIC SUBNETS,





A DIFERENÇA ENTRE AS 2 É """TECHNICAL CONNECTIVITY"""..












-> QUANDO FALAMOS SOBRE SECURITY GROUPS E NACLs,

ESTAMOS 

FALANDO DE FIREWALLS... FIREWALLS... 1 REQUEST 


CHEGA A 1 INSTANCE/SUBNET,

E AÍ 



DECIDIMOS O QUE DEVE ACONTECER COM ESSE REQUEST...





--> JÁ COM O SETUP PUBLIC E PRIVATE SUBNET,



ESTAMOS FALANDO DE ____CONNECTIVITY --> OU SEJA,



__ 1 REQUEST DA INTERNET NÃO PODE NEM MESMO ALCANÇAR 1 DATA 


INSTANCE,

SE ESSA INSTANCE ESTIVER POSICIONADA DENTRO DE 1 PRIVATE SUBNET...











--> ISSO QUER DIZER QUE NENHUM 

INTERNET ACCESS 


É PERMITIDO SEM 1 ___INTERNET GATEWAY___(incoming + outgoing requests; public subnets),


ou NAT GATEWAY (outgoing requests; private subnets)














COM PRIVATE E PUBLIC SUBNETS,



VC ___ NAO CONTROLA __ QUAIS TIPOS DE REQUESTS SÃO BLOCKED OU 

ALLOWED... ------>  VC NAO PODE CONTROLAR 


SE ""QUERO SSH MAS NAO HTTP REQUESTS""",

E SIM 


APENAS PODE DIZER 

"""QUERO TER CONECTIVIDADE COM A INTERNET OU NÃO'"'''














POR FIM, 



MÚLTIPLAS INSTANCES PODEM PERTENCER A 1 MESMA SUBNET...